@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthProvider
@inject NavigationManager Nav

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender) return;
        var state = await AuthProvider.GetAuthenticationStateAsync();
        var isAuth = state.User.Identity?.IsAuthenticated == true;
        Nav.NavigateTo(isAuth ? "/home" : "/login", true);
    }
}